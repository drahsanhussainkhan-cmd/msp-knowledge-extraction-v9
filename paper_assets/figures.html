<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MSP System - Publication Figures</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body { font-family: Arial, sans-serif; max-width: 1000px; margin: 40px auto; }
  .chart-container { margin: 30px 0; padding: 20px; border: 1px solid #ddd; }
  h2 { color: #2c3e50; }
  .instructions { background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 20px 0; }
</style>
</head>
<body>
<h1>MSP Knowledge Extraction - Publication Figures</h1>
<div class="instructions">
  <strong>How to use:</strong> Open this in Chrome/Edge, right-click each chart,
  select "Save image as..." to get PNG files for your paper. Or use browser print to PDF.
</div>

<div class="chart-container">
  <h2>Figure 1: Extraction Distribution by Category</h2>
  <canvas id="chart1" height="400"></canvas>
</div>

<div class="chart-container">
  <h2>Figure 2: Precision by Category (after validation)</h2>
  <canvas id="chart2" height="400"></canvas>
</div>

<script>
// Figure 1: Extraction counts
new Chart(document.getElementById('chart1'), {
  type: 'bar',
  data: {
    labels: ["Data Source", "Legal Reference", "Stakeholder", "Institution", "Species", "Policy", "Method", "Environmental", "Gap", "Result", "Finding", "Distance", "Conflict", "Protected Area", "Prohibition", "Temporal", "Penalty", "Conclusion", "Permit", "Objective", "Coordinate"],
    datasets: [{
      label: 'Extractions',
      data: [1319, 1039, 753, 727, 664, 571, 529, 493, 192, 162, 144, 102, 62, 42, 37, 26, 19, 13, 10, 7, 3],
      backgroundColor: 'rgba(41, 128, 185, 0.7)',
      borderColor: 'rgba(41, 128, 185, 1)',
      borderWidth: 1
    }]
  },
  options: {
    responsive: true,
    indexAxis: 'y',
    plugins: {
      title: { display: true, text: 'Extraction count by category (N=6,914)', font: {size: 16} },
      legend: { display: false }
    },
    scales: {
      x: { title: { display: true, text: 'Number of extractions' } }
    }
  }
});

// Figure 2: Precision

new Chart(document.getElementById('chart2'), {
  type: 'bar',
  data: {
    labels: ["Conclusion", "Conflict", "Data Source", "Distance", "Environmental", "Finding", "Gap", "Institution", "Legal Reference", "Method", "Objective", "Penalty", "Permit", "Policy", "Prohibition", "Protected Area", "Result", "Species", "Stakeholder", "Temporal"],
    datasets: [{
      label: 'Precision',
      data: [0.16666666666666666, 0.18, 0.34, 0.5306122448979592, 0.08, 0.38, 0.4, 0.48, 0.9565217391304348, 0.66, 0.5714285714285714, 0.5882352941176471, 0.6, 0.42, 0.1891891891891892, 0.9047619047619048, 0.24, 0.22, 0.82, 0.24],
      backgroundColor: val_precisions.map(v => v >= 0.8 ? 'rgba(39, 174, 96, 0.7)' : v >= 0.6 ? 'rgba(243, 156, 18, 0.7)' : 'rgba(231, 76, 60, 0.7)'),
      borderWidth: 1
    }]
  },
  options: {
    responsive: true,
    plugins: {
      title: { display: true, text: 'Precision by extraction category', font: {size: 16} },
      legend: { display: false }
    },
    scales: {
      y: { min: 0, max: 1, title: { display: true, text: 'Precision' } },
      x: { title: { display: true, text: 'Category' } }
    }
  }
});



</script>
</body>
</html>